# Выбор колонки распределения (Choosing Distribution Column)
[Документация](https://docs.citusdata.com/en/v11.1/sharding/data_modeling.html)
При выборе колонки для распределения данных нужно учитывать локальность данных.
Если данные локальны в рамках одной ноды, значит возможности БД будут полнее использованы.
Особенно это актуально при наличии запросов с JOIN.
Если данные не локальны, то объединение данных будет происходить с разных нод.
Это породит много сетевых запросов и соединение данных будет происходить не средствами БД.

## Multi-Tenant Apps
У таких приложений в большинстве таблиц есть колонка `tenant_id` или похожая.
Ее и надо использовать.

### Best Practices
- Используйте колонку распределения `tenant_id`, `company_id`, или похожую.
- Небольшие таблицы преобразуйте в справочники.
- Для всех запросов нужно указывать колонку распределения в фильтре. Это позволит избежать лишней работы, на нодах, на которых отсутствуют нужные данные. 


## Real-Time Apps
### Best Practices
- Выберите колонку с большим числом возможных значений. Это позволит равномернее распределять значения по нодам.
  Среди колонок хороших кандидатов выберите колонку, которая часто используется в `group-by` или в качестве ключа в JOIN. 
- Выберите колонку с равномерным распределением. Иначе нагрузка может быть распределена неравномерно.
- Вы можете выбрать только один ключ для распределения. Но таблицы для JOIN могут использовать разные ключи.
  Тогда выберите тот ключ, который встречается чаще в ваших запросах.
  Также стоит учесть число строк в объединениях. Чем больше число строк в объединении, тем более важна локальность данных.
- Некоторые таблицы лучше превратить в справочники. 
  Это увеличит локальность данных для запросов, которые используют эти таблицы.  

## Timeseries Data
### Best Practices
